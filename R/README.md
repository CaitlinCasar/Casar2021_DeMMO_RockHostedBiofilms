# DataStitchR and DataClustR 
### by Caitlin Casar 

**DataStitchR** stitches panoramic images of SEM images coupled to x-ray energy dispersive spectroscopy. **DataClustR** generates reports and figures summarizing the individual datasets generated by DataStitchR and user-generated tif files documenting the distribution of surface features in the images. **DataSummarizeR** collates the reports from each dataset and generates overall summary reports and figures to illustrate large-scale trends. 



### Run a single job with dataStitchR

```bash
Rscript /Users/Caitlin/Desktop/DeMMO_Pubs/DeMMO_NativeRock/DeMMO_NativeRock/R/scipts/dataStitchR.R -f "xray_data" -b "xray_data/SEM_images" -c "coordinates.txt" -z ".tif" -m ".tif" -a "Unknown|Os|SEM" -d "overview" -y "overview" --overview "overview.*tif" -p FALSE -n "D1T4exp"
```

### Run a single job with dataClustR

```bash
Rscript /Users/Caitlin/Desktop/DeMMO_Pubs/DeMMO_NativeRock/DeMMO_NativeRock/R/scipts/dataClustR.R -f "/Volumes/Elements/DeMMO/DeMMO_Publications/DeMMO_NativeRock/data/DeMMO3/D3T20rep_Dec2019_Yates" --transect "transect.*grd" --overview "overview.*grd" --out "reports" -n "D3T20rep" --base "SEM_pano.tif" --overview_base "SEM_overview.tif" -u 4.2 --cores 3 --model_vars 5 --cells "cells.tif" --biogenic "biogenic.tif" -p TRUE
```


### Run a batch job for dataStitchR

```bash
cd /Volumes/Elements/DeMMO/DeMMO_Publications/DeMMO_NativeRock/data

for dir in `find $(pwd) -name 'xray_data'`; 
do sampleID="`basename $(dirname $dir) | cut -f1 -d'_'`";
cd $dir/..;
Rscript /Users/Caitlin/Desktop/DeMMO_Pubs/DeMMO_NativeRock/DeMMO_NativeRock/R/scipts/dataStitchR.R -f "$dir" -b "$dir/SEM_images" -c "$dir/../coordinates.txt" -z ".tif" -m ".tif" -a "Unknown|SEM|Os" -d "overview" -y "overview" --overview "overview.*tif" -p FALSE -n "$sampleID"; 
done
```

### Run a batch job for dataClustR

```bash
cd /Volumes/Elements/DeMMO/DeMMO_Publications/DeMMO_NativeRock/data

for dir in `find $(pwd) -name '*Dec2019*'`; 
do sampleID="`basename $dir | cut -f1 -d'_'`";
cd $dir;
Rscript /Users/Caitlin/Desktop/DeMMO_Pubs/DeMMO_NativeRock/DeMMO_NativeRock/R/scipts/dataClustR.R -f "$dir" --transect "transect.*grd" --overview "overview.*grd" --out "reports" -n "$sampleID" --base "SEM_pano.tif" --overview_base "SEM_overview.tif" -u 4.2 --cores 3 --model_vars 5 --cells "cells.tif" --biogenic "biogenic.tif" -p TRUE
done
```


